{"version":3,"file":"windLayer.js","sources":["../src/windy/windy.js","../src/helper/index.js","../src/openlayers/index.js","../src/amap/index.js","../src/bmap/index.js","../src/index.js"],"sourcesContent":["/* eslint-disable */\r\n\r\n/*  Global class for simulating the movement of particle through a 1km wind grid\r\n credit: All the credit for this work goes to: https://github.com/cambecc for creating the repo:\r\n https://github.com/cambecc/earth. The majority of this code is directly take nfrom there, since its awesome.\r\n This class takes a canvas element and an array of data (1km GFS from http://www.emc.ncep.noaa.gov/index.php?branch=GFS)\r\n and then uses a mercator (forward/reverse) projection to correctly map wind vectors in \"map space\".\r\n The \"start\" method takes the bounds of the map at its current extent and starts the whole gridding,\r\n interpolation and animation process.\r\n */\r\n\r\nconst Windy = function (params = {}) {\r\n  this.params = params;\r\n  const that = this;\r\n\r\n  that.canvas = params.canvas;\r\n\r\n  var defaulColorScale = [\r\n    \"rgb(36,104, 180)\",\r\n    \"rgb(60,157, 194)\",\r\n    \"rgb(128,205,193 )\",\r\n    \"rgb(151,218,168 )\",\r\n    \"rgb(198,231,181)\",\r\n    \"rgb(238,247,217)\",\r\n    \"rgb(255,238,159)\",\r\n    \"rgb(252,217,125)\",\r\n    \"rgb(255,182,100)\",\r\n    \"rgb(252,150,75)\",\r\n    \"rgb(250,112,52)\",\r\n    \"rgb(245,64,32)\",\r\n    \"rgb(237,45,28)\",\r\n    \"rgb(220,24,32)\",\r\n    \"rgb(180,0,35)\"\r\n  ];\r\n\r\n  var buildParams = function(params) {\r\n    if (!params.projection) params.projection = 'EPSG:4326';\r\n    that.MIN_VELOCITY_INTENSITY = params.minVelocity || 0;                      // velocity at which particle intensity is minimum (m/s)\r\n    that.MAX_VELOCITY_INTENSITY = params.maxVelocity || 10;                     // velocity at which particle intensity is maximum (m/s)\r\n    that.VELOCITY_SCALE = (params.velocityScale || 0.005) * (Math.pow(window.devicePixelRatio, 1 / 3) || 1); // scale for wind velocity (completely arbitrary--this value looks nice)\r\n    that.MAX_PARTICLE_AGE = params.particleAge || 90;                         \t // max number of frames a particle is drawn before regeneration\r\n    that.PARTICLE_LINE_WIDTH = params.lineWidth || 1;                           // line width of a drawn particle\r\n    that.PARTICLE_MULTIPLIER = params.particleMultiplier || 1 / 300;            // particle count scalar (completely arbitrary--this values looks nice)\r\n    that.PARTICLE_REDUCTION = (Math.pow(window.devicePixelRatio, 1 / 3) || 1.6);   // multiply particle count for mobiles by this amount\r\n    that.FRAME_RATE = params.frameRate || 16;\r\n    that.COLOR_SCALE = params.colorScale || defaulColorScale;\r\n    that.DEVICEPIXELRATIO = params.devicePixelRatio || 1;\r\n  };\r\n\r\n  buildParams(params);\r\n\r\n  window.FRAME_TIME = 1000 / that.FRAME_RATE;   // desired frames per second\r\n\r\n  var NULL_WIND_VECTOR = [NaN, NaN, null];  // singleton for no wind in the form: [u, v, magnitude]\r\n\r\n  var builder;\r\n  var grid;\r\n  var gridData = that.params.data;\r\n  var date;\r\n  var λ0, φ0, Δλ, Δφ, ni, nj;\r\n\r\n  var setData = function (data) {\r\n    gridData = data;\r\n  };\r\n\r\n  // interpolation for vectors like wind (u,v,m)\r\n  var bilinearInterpolateVector = function (x, y, g00, g10, g01, g11) {\r\n    var rx = (1 - x);\r\n    var ry = (1 - y);\r\n    var a = rx * ry, b = x * ry, c = rx * y, d = x * y;\r\n    var u = g00[0] * a + g10[0] * b + g01[0] * c + g11[0] * d;\r\n    var v = g00[1] * a + g10[1] * b + g01[1] * c + g11[1] * d;\r\n    return [u, v, Math.sqrt(u * u + v * v)];\r\n  };\r\n\r\n\r\n  var createWindBuilder = function (uComp, vComp) {\r\n    var uData = uComp.data, vData = vComp.data;\r\n    return {\r\n      header: uComp.header,\r\n      //recipe: recipeFor(\"wind-\" + uComp.header.surface1Value),\r\n      data: function (i) {\r\n        return [uData[i], vData[i]];\r\n      },\r\n      interpolate: bilinearInterpolateVector\r\n    }\r\n  };\r\n\r\n  var createBuilder = function (data) {\r\n    var uComp = null, vComp = null, scalar = null;\r\n\r\n    data.forEach(function (record) {\r\n      switch (record.header.parameterCategory + \",\" + record.header.parameterNumber) {\r\n        case \"1,2\":\r\n        case \"2,2\":\r\n          uComp = record;\r\n          break;\r\n        case \"1,3\":\r\n        case \"2,3\":\r\n          vComp = record;\r\n          break;\r\n        default:\r\n          scalar = record;\r\n      }\r\n    });\r\n\r\n    return createWindBuilder(uComp, vComp);\r\n  };\r\n\r\n  var buildGrid = function (data, callback) {\r\n\r\n    builder = createBuilder(data);\r\n    var header = builder.header;\r\n\r\n    λ0 = header.lo1;\r\n    φ0 = Math.max(header.la2, header.la1);  // the grid's origin (e.g., 0.0E, 90.0N)\r\n\r\n    Δλ = header.dx;\r\n    Δφ = header.dy;    // distance between grid points (e.g., 2.5 deg lon, 2.5 deg lat)\r\n\r\n    ni = header.nx;\r\n    nj = header.ny;    // number of grid points W-E and N-S (e.g., 144 x 73)\r\n\r\n    date = new Date(header.refTime);\r\n    date.setHours(date.getHours() + header.forecastTime);\r\n\r\n    // Scan mode 0 assumed. Longitude increases from λ0, and latitude decreases from φ0.\r\n    // http://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_table3-4.shtml\r\n    grid = [];\r\n    var p = 0;\r\n    var isContinuous = Math.floor(ni * Δλ) >= 360;\r\n\r\n    for (var j = 0; j < nj; j++) {\r\n      var row = [];\r\n      for (var i = 0; i < ni; i++, p++) {\r\n        row[i] = builder.data(p);\r\n      }\r\n      if (isContinuous) {\r\n        // For wrapped grids, duplicate first column as last column to simplify interpolation logic\r\n        row.push(row[0]);\r\n      }\r\n      grid[j] = row;\r\n    }\r\n\r\n    callback({\r\n      date: date,\r\n      interpolate: interpolate\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Get interpolated grid value from Lon/Lat position\r\n   * @param λ {Float} Longitude\r\n   * @param φ {Float} Latitude\r\n   * @returns {Object}\r\n   */\r\n  var interpolate = function (λ, φ) {\r\n\r\n    if (!grid) return null;\r\n\r\n    var i = floorMod(λ - λ0, 360) / Δλ;  // calculate longitude index in wrapped range [0, 360)\r\n    var j = (φ0 - φ) / Δφ;                 // calculate latitude index in direction +90 to -90\r\n\r\n    var fi = Math.floor(i), ci = fi + 1;\r\n    var fj = Math.floor(j), cj = fj + 1;\r\n\r\n    var row;\r\n    if ((row = grid[fj])) {\r\n      var g00 = row[fi];\r\n      var g10 = row[ci];\r\n      if (isValue(g00) && isValue(g10) && (row = grid[cj])) {\r\n        var g01 = row[fi];\r\n        var g11 = row[ci];\r\n        if (isValue(g01) && isValue(g11)) {\r\n          // All four points found, so interpolate the value.\r\n          return builder.interpolate(i - fi, j - fj, g00, g10, g01, g11);\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n\r\n  /**\r\n   * @returns {Boolean} true if the specified value is not null and not undefined.\r\n   */\r\n  var isValue = function (x) {\r\n    return x !== null && x !== undefined;\r\n  };\r\n\r\n  /**\r\n   * @returns {Number} returns remainder of floored division, i.e., floor(a / n). Useful for consistent modulo\r\n   *          of negative numbers. See http://en.wikipedia.org/wiki/Modulo_operation.\r\n   */\r\n  var floorMod = function (a, n) {\r\n    return a - n * Math.floor(a / n);\r\n  };\r\n\r\n  /**\r\n   * @returns {Number} the value x clamped to the range [low, high].\r\n   */\r\n  var clamp = function (x, range) {\r\n    return Math.max(range[0], Math.min(x, range[1]));\r\n  };\r\n\r\n  /**\r\n   * @returns {Boolean} true if agent is probably a mobile device. Don't really care if this is accurate.\r\n   */\r\n  var isMobile = function () {\r\n    return (/android|blackberry|iemobile|ipad|iphone|ipod|opera mini|webos/i).test(navigator.userAgent);\r\n  };\r\n\r\n  /**\r\n   * Calculate distortion of the wind vector caused by the shape of the projection at point (x, y). The wind\r\n   * vector is modified in place and returned by this function.\r\n   */\r\n  var distort = function (projection, λ, φ, x, y, scale, wind, windy) {\r\n    var u = wind[0] * scale;\r\n    var v = wind[1] * scale;\r\n    var d = distortion(projection, λ, φ, x, y, windy);\r\n\r\n    // Scale distortion vectors by u and v, then add.\r\n    wind[0] = d[0] * u + d[2] * v;\r\n    wind[1] = d[1] * u + d[3] * v;\r\n    return wind;\r\n  };\r\n\r\n  var distortion = function (projection, λ, φ, x, y, windy) {\r\n    var τ = 2 * Math.PI;\r\n    // var H = Math.pow(10, -5.2);\r\n    var H = that.params.projection === 'EPSG:4326' ? 5 : Math.pow(10, -5.2);\r\n    var hλ = λ < 0 ? H : -H;\r\n    var hφ = φ < 0 ? H : -H;\r\n\r\n    var pλ = project(φ, λ + hλ, windy);\r\n    var pφ = project(φ + hφ, λ, windy);\r\n\r\n    // Meridian scale factor (see Snyder, equation 4-3), where R = 1. This handles issue where length of 1º λ\r\n    // changes depending on φ. Without this, there is a pinching effect at the poles.\r\n    var k = Math.cos(φ / 360 * τ);\r\n    return [\r\n      (pλ[0] - x) / hλ / k,\r\n      (pλ[1] - y) / hλ / k,\r\n      (pφ[0] - x) / hφ,\r\n      (pφ[1] - y) / hφ\r\n    ];\r\n  };\r\n\r\n  var createField = function (columns, bounds, callback) {\r\n\r\n    /**\r\n     * @returns {Array} wind vector [u, v, magnitude] at the point (x, y), or [NaN, NaN, null] if wind\r\n     *          is undefined at that point.\r\n     */\r\n    function field (x, y) {\r\n      var column = columns[Math.round(x)];\r\n      return column && column[Math.round(y)] || NULL_WIND_VECTOR;\r\n    }\r\n\r\n    // Frees the massive \"columns\" array for GC. Without this, the array is leaked (in Chrome) each time a new\r\n    // field is interpolated because the field closure's context is leaked, for reasons that defy explanation.\r\n    field.release = function () {\r\n      columns = [];\r\n    };\r\n\r\n    field.randomize = function (o) {  // UNDONE: this method is terrible\r\n      var x, y;\r\n      var safetyNet = 0;\r\n      do {\r\n        x = Math.round(Math.floor(Math.random() * bounds.width) + bounds.x);\r\n        y = Math.round(Math.floor(Math.random() * bounds.height) + bounds.y)\r\n      } while (field(x, y)[2] === null && safetyNet++ < 30);\r\n      o.x = x;\r\n      o.y = y;\r\n      return o;\r\n    };\r\n\r\n    callback(bounds, field);\r\n  };\r\n\r\n  var buildBounds = function (bounds, width, height) {\r\n    var upperLeft = bounds[0];\r\n    var lowerRight = bounds[1];\r\n    var x = Math.round(upperLeft[0]); //Math.max(Math.floor(upperLeft[0], 0), 0);\r\n    var y = Math.max(Math.floor(upperLeft[1], 0), 0);\r\n    var xMax = Math.min(Math.ceil(lowerRight[0], width), width - 1);\r\n    var yMax = Math.min(Math.ceil(lowerRight[1], height), height - 1);\r\n    return {x: x, y: y, xMax: width, yMax: yMax, width: width, height: height};\r\n  };\r\n\r\n  var deg2rad = function (deg) {\r\n    return (deg / 180) * Math.PI;\r\n  };\r\n\r\n  var rad2deg = function (ang) {\r\n    return ang / (Math.PI / 180.0);\r\n  };\r\n\r\n  var invert\r\n\r\n  if (that.params.projection === 'EPSG:4326') {\r\n    invert = function (x, y, windy) {\r\n      var mapLonDelta = windy.east - windy.west;\r\n      var mapLatDelta = windy.south - windy.north;\r\n      var lat = rad2deg(windy.north) + y / windy.height * rad2deg(mapLatDelta);\r\n      var lon = rad2deg(windy.west) + x / windy.width * rad2deg(mapLonDelta);\r\n      return [lon, lat];\r\n    };\r\n  } else {\r\n    invert = function (x, y, windy) {\r\n      var mapLonDelta = windy.east - windy.west;\r\n      var worldMapRadius = windy.width / rad2deg(mapLonDelta) * 360 / (2 * Math.PI);\r\n      var mapOffsetY = (worldMapRadius / 2 * Math.log((1 + Math.sin(windy.south)) / (1 - Math.sin(windy.south))));\r\n      var equatorY = windy.height + mapOffsetY;\r\n      var a = (equatorY - y) / worldMapRadius;\r\n      var lat = 180 / Math.PI * (2 * Math.atan(Math.exp(a)) - Math.PI / 2);\r\n      var lon = rad2deg(windy.west) + x / windy.width * rad2deg(mapLonDelta);\r\n      return [lon, lat];\r\n    };\r\n  }\r\n\r\n  var mercY = function (lat) {\r\n    return Math.log(Math.tan(lat / 2 + Math.PI / 4));\r\n  };\r\n\r\n\r\n  var project = function (lat, lon, windy) { // both in radians, use deg2rad if neccessary\r\n    var ymin = mercY(windy.south);\r\n    var ymax = mercY(windy.north);\r\n    var xFactor = windy.width / (windy.east - windy.west);\r\n    var yFactor = windy.height / (ymax - ymin);\r\n\r\n    var y = mercY(deg2rad(lat));\r\n    var x = (deg2rad(lon) - windy.west) * xFactor;\r\n    var y = (ymax - y) * yFactor; // y points south\r\n    return [x, y];\r\n  };\r\n\r\n  var interpolateField = function (grid, bounds, extent, callback) {\r\n\r\n    var projection = {};\r\n    var mapArea = ((extent.south - extent.north) * (extent.west - extent.east));\r\n    var velocityScale = that.VELOCITY_SCALE * Math.pow(mapArea, 0.4);\r\n\r\n    var columns = [];\r\n    var x = bounds.x;\r\n\r\n    function interpolateColumn (x) {\r\n      var column = [];\r\n      for (var y = bounds.y; y <= bounds.yMax; y += 2) {\r\n        var coord = invert(x, y, extent);\r\n        if (coord) {\r\n          var λ = coord[0], φ = coord[1];\r\n          if (isFinite(λ)) {\r\n            var wind = grid.interpolate(λ, φ);\r\n            if (wind) {\r\n              wind = distort(projection, λ, φ, x, y, velocityScale, wind, extent);\r\n              column[y + 1] = column[y] = wind;\r\n\r\n            }\r\n          }\r\n        }\r\n      }\r\n      columns[x + 1] = columns[x] = column;\r\n    }\r\n\r\n    (function batchInterpolate () {\r\n      var start = Date.now();\r\n      while (x < bounds.width) {\r\n        interpolateColumn(x);\r\n        x += 2;\r\n        if ((Date.now() - start) > 1000) { //MAX_TASK_TIME) {\r\n          setTimeout(batchInterpolate, 25);\r\n          return;\r\n        }\r\n      }\r\n      createField(columns, bounds, callback);\r\n    })();\r\n  };\r\n\r\n  var animationLoop;\r\n  var animate = function (bounds, field) {\r\n\r\n    function windIntensityColorScale (min, max) {\r\n\r\n      that.COLOR_SCALE.indexFor = function (m) {  // map velocity speed to a style\r\n        return Math.max(0, Math.min((that.COLOR_SCALE.length - 1),\r\n          Math.round((m - min) / (max - min) * (that.COLOR_SCALE.length - 1))));\r\n\r\n      };\r\n\r\n      return that.COLOR_SCALE;\r\n    }\r\n\r\n    var colorStyles = windIntensityColorScale(that.MIN_VELOCITY_INTENSITY, that.MAX_VELOCITY_INTENSITY);\r\n    var buckets = colorStyles.map(function () {\r\n      return [];\r\n    });\r\n\r\n    var particleCount = Math.round(bounds.width * bounds.height * that.PARTICLE_MULTIPLIER);\r\n    if (isMobile()) {\r\n      particleCount *= that.PARTICLE_REDUCTION;\r\n    }\r\n\r\n    var fadeFillStyle = \"rgba(0, 0, 0, 0.97)\";\r\n\r\n    var particles = [];\r\n    for (var i = 0; i < particleCount; i++) {\r\n      particles.push(field.randomize({age: Math.floor(Math.random() * that.MAX_PARTICLE_AGE) + 0}));\r\n    }\r\n\r\n    function evolve () {\r\n      buckets.forEach(function (bucket) {\r\n        bucket.length = 0;\r\n      });\r\n      particles.forEach(function (particle) {\r\n        if (particle.age > that.MAX_PARTICLE_AGE) {\r\n          field.randomize(particle).age = 0;\r\n        }\r\n        var x = particle.x;\r\n        var y = particle.y;\r\n        var v = field(x, y);  // vector at current position\r\n        var m = v[2];\r\n        if (m === null) {\r\n          particle.age = that.MAX_PARTICLE_AGE;  // particle has escaped the grid, never to return...\r\n        }\r\n        else {\r\n          var xt = x + v[0];\r\n          var yt = y + v[1];\r\n          if (field(xt, yt)[2] !== null) {\r\n            // Path from (x,y) to (xt,yt) is visible, so add this particle to the appropriate draw bucket.\r\n            particle.xt = xt;\r\n            particle.yt = yt;\r\n            buckets[colorStyles.indexFor(m)].push(particle);\r\n          } else {\r\n            // Particle isn't visible, but it still moves through the field.\r\n            particle.x = xt;\r\n            particle.y = yt;\r\n          }\r\n        }\r\n        particle.age += 1;\r\n      });\r\n    }\r\n\r\n    var g = that.canvas.getContext(\"2d\");\r\n    g.lineWidth = that.PARTICLE_LINE_WIDTH;\r\n    g.fillStyle = fadeFillStyle;\r\n    g.globalAlpha = 0.6;\r\n\r\n    function draw () {\r\n      // Fade existing particle trails.\r\n      var prev = \"lighter\";\r\n      g.globalCompositeOperation = \"destination-in\";\r\n      g.fillRect(bounds.x, bounds.y, that.canvas.width, that.canvas.height);\r\n      g.globalCompositeOperation = prev;\r\n      g.globalAlpha = 0.9;\r\n\r\n      // Draw new particle trails.\r\n      buckets.forEach(function (bucket, i) {\r\n        if (bucket.length > 0) {\r\n          g.beginPath();\r\n          g.strokeStyle = colorStyles[i];\r\n          bucket.forEach(function (particle) {\r\n            g.moveTo(particle.x * that.DEVICEPIXELRATIO, particle.y * that.DEVICEPIXELRATIO);\r\n            g.lineTo(particle.xt * that.DEVICEPIXELRATIO, particle.yt * that.DEVICEPIXELRATIO);\r\n            particle.x = particle.xt;\r\n            particle.y = particle.yt;\r\n          });\r\n          g.stroke();\r\n        }\r\n      });\r\n    }\r\n\r\n    var then = Date.now();\r\n    (function frame () {\r\n      animationLoop = requestAnimationFrame(frame);\r\n      var now = Date.now();\r\n      var delta = now - then;\r\n      if (delta > FRAME_TIME) {\r\n        then = now - (delta % FRAME_TIME);\r\n        evolve();\r\n        draw();\r\n        params.onDraw && params.onDraw();\r\n      }\r\n    })();\r\n  };\r\n\r\n  var updateData = function (data, bounds, width, height, extent) {\r\n    delete that.params.data;\r\n    that.params.data = data;\r\n    if (extent)\r\n      start(bounds, width, height, extent);\r\n  };\r\n\r\n  var start = function (bounds, width, height, extent) {\r\n    var mapBounds = {\r\n      south: deg2rad(extent[0][1]),\r\n      north: deg2rad(extent[1][1]),\r\n      east: deg2rad(extent[1][0]),\r\n      west: deg2rad(extent[0][0]),\r\n      width: width,\r\n      height: height\r\n    };\r\n\r\n    stop();\r\n\r\n    // build grid\r\n    buildGrid(gridData, function (grid) {\r\n      // interpolateField\r\n      interpolateField(grid, buildBounds(bounds, width, height), mapBounds, function (bounds, field) {\r\n        // animate the canvas with random points\r\n        windy.field = field;\r\n        animate(bounds, field);\r\n      });\r\n\r\n    });\r\n  };\r\n\r\n  var stop = function () {\r\n    if (windy.field) windy.field.release();\r\n    if (animationLoop) cancelAnimationFrame(animationLoop);\r\n  };\r\n\r\n  var shift = function (dx, dy) {\r\n    var canvas = that.canvas, w = canvas.width, h = canvas.height, ctx = canvas.getContext(\"2d\");\r\n    if (w > dx && h > dy) {\r\n      var clamp = function (high, value) {\r\n        return Math.max(0, Math.min(high, value));\r\n      };\r\n      var imageData = ctx.getImageData(clamp(w, -dx), clamp(h, -dy), clamp(w, w - dx), clamp(h, h - dy));\r\n      ctx.clearRect(0, 0, w, h);\r\n      ctx.putImageData(imageData, clamp(w, dx), clamp(h, dy));\r\n      for (var i = 0, pLength = particles.length; i < pLength; i++) {\r\n        particles[i].x += dx;\r\n        particles[i].y += dy;\r\n      }\r\n    }\r\n  };\r\n\r\n  var updateParams = function(params) {\r\n    that.params = params;\r\n    buildParams(that.params);\r\n  };\r\n\r\n  var getParams = function() {\r\n    return that.params;\r\n  };\r\n\r\n  var windy = {\r\n    params: that.params,\r\n    start: start,\r\n    stop: stop,\r\n    update: updateData,\r\n    shift: shift,\r\n    createField: createField,\r\n    interpolatePoint: interpolate,\r\n    setData: setData,\r\n    updateParams: updateParams,\r\n    getParams: getParams,\r\n    buildParams: buildParams,\r\n  };\r\n\r\n  return windy;\r\n};\r\n\r\n// polyfill\r\nwindow.requestAnimationFrame = (function () {\r\n  return window.requestAnimationFrame ||\r\n    window.webkitRequestAnimationFrame ||\r\n    window.mozRequestAnimationFrame ||\r\n    window.oRequestAnimationFrame ||\r\n    window.msRequestAnimationFrame ||\r\n    function (callback) {\r\n      return window.setTimeout(callback, 1000 / window.FRAME_RATE);\r\n    };\r\n})();\r\n\r\nif (!window.cancelAnimationFrame) {\r\n  window.cancelAnimationFrame = function (id) {\r\n    clearTimeout(id);\r\n  };\r\n}\r\n\r\nexport default Windy\r\n","/**\r\n * create canvas\r\n * @param width\r\n * @param height\r\n * @param Canvas\r\n * @returns {HTMLCanvasElement}\r\n */\r\nconst createCanvas = (width, height, Canvas) => {\r\n  if (typeof document !== 'undefined') {\r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n    return canvas\r\n  } else {\r\n    // create a new canvas instance in node.js\r\n    // the canvas class needs to have a default constructor without any parameter\r\n    return new Canvas(width, height);\r\n  }\r\n};\r\n\r\nconst getDirection = (uMs, vMs, angleConvention) => {\r\n  // Default angle convention is CW\r\n  if (angleConvention.endsWith('CCW')) {\r\n    // vMs comes out upside-down..\r\n    vMs = vMs > 0 ? vMs = -vMs : Math.abs(vMs);\r\n  }\r\n  const velocityAbs = Math.sqrt(Math.pow(uMs, 2) + Math.pow(vMs, 2));\r\n  const velocityDir = Math.atan2(uMs / velocityAbs, vMs / velocityAbs);\r\n  let velocityDirToDegrees = velocityDir * 180 / Math.PI + 180;\r\n  if (angleConvention === 'bearingCW' || angleConvention === 'meteoCCW') {\r\n    velocityDirToDegrees += 180;\r\n    if (velocityDirToDegrees >= 360) velocityDirToDegrees -= 360;\r\n  }\r\n  return velocityDirToDegrees;\r\n};\r\n\r\nconst getSpeed = (uMs, vMs, unit) => {\r\n  const velocityAbs = Math.sqrt(Math.pow(uMs, 2) + Math.pow(vMs, 2));\r\n  // Default is m/s\r\n  if (unit === 'k/h') {\r\n    return meterSec2kilometerHour(velocityAbs);\r\n  } else if (unit === 'kt') {\r\n    return meterSec2Knots(velocityAbs);\r\n  } else {\r\n    return velocityAbs;\r\n  }\r\n};\r\n\r\nconst meterSec2Knots = (meters) => {\r\n  return meters / 0.514\r\n};\r\n\r\nconst meterSec2kilometerHour = (meters) => {\r\n  return meters * 3.6\r\n};\r\n\r\nconst getExtent = (coords) => {\r\n  const extent = [\r\n    Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY,\r\n    Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY\r\n  ];\r\n  return coords.reduce((prev, coord) => {\r\n    return [\r\n      Math.min(coord[0], prev[0]),\r\n      Math.min(coord[1], prev[1]),\r\n      Math.max(coord[0], prev[2]),\r\n      Math.max(coord[1], prev[3])\r\n    ];\r\n  }, extent);\r\n}\r\n\r\nexport {\r\n  getExtent,\r\n  getSpeed,\r\n  createCanvas,\r\n  getDirection\r\n}\r\n","import Windy from '../windy/windy';\r\nimport { createCanvas, getDirection, getSpeed } from '../helper';\r\n\r\nconst global = typeof window === 'undefined' ? {} : window;\r\nconst ol = global.ol || {};\r\n\r\nif (!ol.layer) ol.layer = {};\r\nif (!ol.layer.Image) ol.layer.Image = class {};\r\n\r\nclass OlWind extends ol.layer.Image {\r\n  constructor (data, options = {}) {\r\n    super(options);\r\n\r\n    /**\r\n     * 矢量图层\r\n     * @type {null}\r\n     */\r\n    this._canvas = null;\r\n\r\n    /**\r\n     * windy 数据\r\n     */\r\n    this.data = data;\r\n\r\n    /**\r\n     * windy layer\r\n     * @type {null}\r\n     */\r\n    this.$Windy = null;\r\n\r\n    /**\r\n     * is clear\r\n     * @type {boolean}\r\n     */\r\n    this.isClear = false;\r\n\r\n    /**\r\n     * options\r\n     * @type {{}}\r\n     */\r\n    this.options = options;\r\n    this.setSource(new ol.source.ImageCanvas({\r\n      logo: options.logo,\r\n      state: options.state,\r\n      attributions: options.attributions,\r\n      resolutions: options.resolutions,\r\n      canvasFunction: this.canvasFunction.bind(this),\r\n      // projection: (options.hasOwnProperty('projection') ? options.projection : 'EPSG:3857'),\r\n      ratio: (options.hasOwnProperty('ratio') ? options.ratio : 1)\r\n    }));\r\n    this.on('precompose', this.redraw, this);\r\n  }\r\n\r\n  /**\r\n   * get layer data\r\n   * @returns {*}\r\n   */\r\n  getData () {\r\n    return this.data;\r\n  }\r\n\r\n  /**\r\n   * set layer data\r\n   * @param data\r\n   * @returns {OlWind}\r\n   */\r\n  setData (data) {\r\n    const _map = this.getMap();\r\n    if (!_map) return this;\r\n    this.data = data;\r\n    this.isClear = false;\r\n    if (!this.$Windy && this._canvas) {\r\n      this.render(this._canvas);\r\n      _map.renderSync();\r\n    } else if (this.$Windy && this._canvas) {\r\n      if (this._cloneLayer) {\r\n        _map.addLayer(this._cloneLayer);\r\n        delete this._cloneLayer;\r\n      }\r\n      const extent = this._getExtent();\r\n      this.$Windy.update(this.getData(), extent[0], extent[1], extent[2], extent[3]);\r\n    } else {\r\n      console.warn('please create new instance');\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * render windy layer\r\n   * @returns {OlWind}\r\n   */\r\n  render (canvas) {\r\n    const extent = this._getExtent();\r\n    if (this.isClear || !this.getData() || !extent) return this;\r\n    if (canvas && !this.$Windy) {\r\n      const {\r\n        minVelocity,\r\n        maxVelocity,\r\n        velocityScale,\r\n        particleAge,\r\n        lineWidth,\r\n        particleMultiplier,\r\n        colorScale\r\n      } = this.options;\r\n      this.$Windy = new Windy({\r\n        canvas: canvas,\r\n        projection: this._getProjectionCode(),\r\n        data: this.getData(),\r\n        devicePixelRatio: this.options.devicePixelRatio,\r\n        minVelocity,\r\n        maxVelocity,\r\n        velocityScale,\r\n        particleAge,\r\n        lineWidth,\r\n        particleMultiplier,\r\n        colorScale\r\n      });\r\n      this.$Windy.start(extent[0], extent[1], extent[2], extent[3]);\r\n    } else if (canvas && this.$Windy) {\r\n      const extent = this._getExtent();\r\n      this.$Windy.start(extent[0], extent[1], extent[2], extent[3]);\r\n    }\r\n    return this\r\n  }\r\n\r\n  /**\r\n   * re-draw\r\n   */\r\n  redraw () {\r\n    if (this.isClear) return;\r\n    const _extent = this.options.extent || this._getMapExtent();\r\n    this.setExtent(_extent);\r\n  }\r\n\r\n  /**\r\n   * canvas constructor\r\n   * @param extent\r\n   * @param resolution\r\n   * @param pixelRatio\r\n   * @param size\r\n   * @param projection\r\n   * @returns {*}\r\n   */\r\n  canvasFunction (extent, resolution, pixelRatio, size, projection) {\r\n    if (!this._canvas) {\r\n      this._canvas = createCanvas(size[0], size[1]);\r\n    } else {\r\n      this._canvas.width = size[0];\r\n      this._canvas.height = size[1];\r\n    }\r\n    if (resolution <= this.get('maxResolution')) {\r\n      this.render(this._canvas);\r\n    } else {\r\n      // console.warn('超出所设置最大分辨率！')\r\n    }\r\n    return this._canvas;\r\n  }\r\n\r\n  /**\r\n   * bounds, width, height, extent\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  _getExtent () {\r\n    const size = this._getMapSize();\r\n    const _extent = this._getMapExtent();\r\n    if (size && _extent) {\r\n      const _projection = this._getProjectionCode();\r\n      const extent = ol.proj.transformExtent(_extent, _projection, 'EPSG:4326');\r\n      return [[[0, 0], [size[0], size[1]]], size[0], size[1], [[extent[0], extent[1]], [extent[2], extent[3]]]];\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get map current extent\r\n   * @returns {ol.View|*|Array<number>}\r\n   * @private\r\n   */\r\n  _getMapExtent () {\r\n    if (!this.getMap()) return;\r\n    const size = this._getMapSize();\r\n    const _view = this.getMap().getView();\r\n    return _view && _view.calculateExtent(size);\r\n  }\r\n\r\n  /**\r\n   * get size\r\n   * @returns {ol.Size|*}\r\n   * @private\r\n   */\r\n  _getMapSize () {\r\n    if (!this.getMap()) return;\r\n    return this.getMap().getSize();\r\n  }\r\n\r\n  /**\r\n   * append layer to map\r\n   * @param map\r\n   */\r\n  appendTo (map) {\r\n    if (map && map instanceof ol.Map) {\r\n      this.set('originMap', map);\r\n      this.getSource().projection_ = this._getProjectionCode();\r\n      map.addLayer(this);\r\n    } else {\r\n      throw new Error('not map object');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get mouse point data\r\n   * @param coordinates\r\n   * @returns {null|{speed: (*|number), direction}}\r\n   */\r\n  getPointData (coordinates) {\r\n    if (!this.$Windy) return null;\r\n    const gridValue = this.$Windy.interpolatePoint(coordinates[0], coordinates[1]);\r\n    if (gridValue && !isNaN(gridValue[0]) && !isNaN(gridValue[1]) && gridValue[2]) {\r\n      return {\r\n        direction: getDirection(gridValue[0], gridValue[1], this.options.angleConvention || 'bearingCCW'),\r\n        speed: getSpeed(gridValue[0], gridValue[1], this.options.speedUnit)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * clearWind method will retain the instance\r\n   * @private\r\n   */\r\n  clearWind () {\r\n    const _map = this.getMap();\r\n    if (!_map) return;\r\n    if (this.$Windy) this.$Windy.stop();\r\n    this.isClear = true;\r\n    this._cloneLayer = this;\r\n    _map.removeLayer(this);\r\n    this.changed();\r\n    this.getMap().renderSync();\r\n  }\r\n\r\n  /**\r\n   * remove layer this instance will be destroyed after remove\r\n   */\r\n  removeLayer () {\r\n    const _map = this.getMap();\r\n    if (!_map) return;\r\n    if (this.$Windy) this.$Windy.stop();\r\n    this.un('precompose', this.redraw, this);\r\n    _map.removeLayer(this);\r\n    delete this._canvas;\r\n    delete this.$Windy;\r\n    delete this._cloneLayer;\r\n  }\r\n\r\n  /**\r\n   * set map\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    this.set('originMap', map);\r\n    // ol.layer.Image.prototype.setMap.call(this, map)\r\n  }\r\n\r\n  /**\r\n   * get map\r\n   */\r\n  getMap () {\r\n    return this.get('originMap');\r\n  }\r\n\r\n  _getProjectionCode () {\r\n    let code = '';\r\n    const map = this.getMap();\r\n    if (map) {\r\n      code =\r\n        map.getView() &&\r\n        map\r\n          .getView()\r\n          .getProjection()\r\n          .getCode();\r\n    } else {\r\n      code = 'EPSG:3857';\r\n    }\r\n    return code;\r\n  }\r\n\r\n  /**\r\n   * update windy config\r\n   * @param params\r\n   * @returns {OlWind}\r\n   */\r\n  updateParams (params) {\r\n    this.options = Object.assign(this.options, params);\r\n    if (this.$Windy) {\r\n      const {\r\n        minVelocity, // 粒子强度最小的速度 (m/s)\r\n        maxVelocity, // 粒子强度最大的速度 (m/s)\r\n        velocityScale, // 风速的比例\r\n        particleAge, // 重绘之前生成的离子数量的最大帧数\r\n        lineWidth, // 绘制粒子的线宽\r\n        particleMultiplier, // 离子数量\r\n        colorScale\r\n      } = this.options;\r\n      if (this.$Windy) {\r\n        this.$Windy.updateParams({\r\n          minVelocity,\r\n          maxVelocity,\r\n          velocityScale,\r\n          particleAge,\r\n          lineWidth,\r\n          particleMultiplier,\r\n          colorScale,\r\n          devicePixelRatio: this.options.devicePixelRatio\r\n        });\r\n        if (this.getMap() && this._canvas && this.data) {\r\n          this.render(this._canvas);\r\n        }\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * get windy config\r\n   * @returns {null|*|Windy.params|{velocityScale, minVelocity, maxVelocity, colorScale, particleAge, lineWidth, particleMultiplier}}\r\n   */\r\n  getParams () {\r\n    return this.$Windy && this.$Windy.getParams();\r\n  }\r\n}\r\n\r\nexport default OlWind;\r\n","import Windy from '../windy/windy';\r\nimport { createCanvas, getDirection, getSpeed } from '../helper';\r\n\r\nconst global = typeof window === 'undefined' ? {} : window;\r\nconst AMap = global.AMap || {};\r\n\r\nclass AMapWind {\r\n  constructor (data, options = {}) {\r\n    this.options = options;\r\n\r\n    /**\r\n     * internal\r\n     * @type {null}\r\n     */\r\n    this.canvas = null;\r\n\r\n    /**\r\n     * windy 数据\r\n     */\r\n    this.data = data;\r\n\r\n    /**\r\n     * canvas layer\r\n     * @type {null}\r\n     * @private\r\n     */\r\n    this.layer_ = null;\r\n\r\n    /**\r\n     * windy layer\r\n     * @type {null}\r\n     */\r\n    this._windy = null;\r\n\r\n    if (options.map) {\r\n      this.appendTo(options.map)\r\n    }\r\n\r\n    /**\r\n     * bind context\r\n     * @type {{new(...args: any[][]): any} | ((...args: any[][]) => any) | ((...args: any[]) => any) | any | {new(...args: any[]): any}}\r\n     */\r\n    this.init = this.init.bind(this);\r\n    this.handleResize = this.handleResize.bind(this);\r\n    this.canvasFunction = this.canvasFunction.bind(this);\r\n    this._addReFreshHandle = this._addReFreshHandle.bind(this);\r\n  }\r\n\r\n  /**\r\n   * append layer to map\r\n   * @param map\r\n   */\r\n  appendTo (map) {\r\n    if (map) {\r\n      this.init(map)\r\n    } else {\r\n      throw new Error('not map object');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get layer data\r\n   * @returns {*}\r\n   */\r\n  getData () {\r\n    return this.data;\r\n  }\r\n\r\n  /**\r\n   * set data\r\n   * @param data\r\n   */\r\n  setData (data) {\r\n    this.data = data;\r\n    if (this.map && this.canvas && this.data) {\r\n      this.render(this.canvas);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * init windy layer\r\n   * @param map\r\n   * @param options\r\n   */\r\n  init (map, options) {\r\n    if (map) {\r\n      this.map = map;\r\n      this.context = this.options.context || '2d';\r\n      this.getCanvasLayer();\r\n      this.map.on('resize', this.handleResize, this)\r\n    } else {\r\n      throw new Error('not map object')\r\n    }\r\n  }\r\n\r\n  handleResize () {\r\n    if (this.canvas) {\r\n      this.canvasFunction()\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  render layer\r\n   * @param canvas\r\n   * @returns {*}\r\n   */\r\n  render (canvas) {\r\n    if (!canvas) return;\r\n    const extent = this._getExtent();\r\n    if (!this.getData() || !extent) return this;\r\n    if (canvas && !this._windy) {\r\n      const {\r\n        minVelocity,\r\n        maxVelocity,\r\n        velocityScale,\r\n        particleAge,\r\n        lineWidth,\r\n        particleMultiplier,\r\n        colorScale\r\n      } = this.options;\r\n      this._windy = new Windy({\r\n        canvas: canvas,\r\n        data: this.getData(),\r\n        'onDraw': () => {\r\n        },\r\n        minVelocity,\r\n        maxVelocity,\r\n        velocityScale,\r\n        particleAge,\r\n        lineWidth,\r\n        particleMultiplier,\r\n        colorScale\r\n      });\r\n      this._windy.start(extent[0], extent[1], extent[2], extent[3]);\r\n    } else if (canvas && this._windy) {\r\n      this._windy.start(extent[0], extent[1], extent[2], extent[3]);\r\n    }\r\n    // 2D视图时可以省略\r\n    this._addReFreshHandle();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * 3D模式下手动刷新\r\n   * @private\r\n   */\r\n  _addReFreshHandle () {\r\n    if (!this.map) return;\r\n    const type = this.map.getViewMode_();\r\n    if (type.toLowerCase() === '3d') {\r\n      this.layer_ && this.layer_.reFresh();\r\n      AMap.Util.requestAnimFrame(this._addReFreshHandle);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get canvas layer\r\n   */\r\n  getCanvasLayer () {\r\n    if (!this.canvas && !this.layer_) {\r\n      const canvas = this.canvasFunction();\r\n      const bounds = this._getBounds();\r\n      this.layer_ = new AMap.CanvasLayer({\r\n        canvas: canvas,\r\n        bounds: this.options.bounds || bounds,\r\n        zooms: this.options.zooms || [0, 22],\r\n        zIndex: this.options.zIndex || 12,\r\n        opacity: this.options.opacity || 1\r\n      });\r\n      this.map.on('mapmove', this.canvasFunction, this);\r\n      this.map.on('zoomchange', this.canvasFunction, this);\r\n      this.layer_.setMap(this.map);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * canvas constructor\r\n   * @returns {*}\r\n   */\r\n  canvasFunction () {\r\n    const [width, height] = [this.map.getSize().width, this.map.getSize().height];\r\n    if (!this.canvas) {\r\n      this.canvas = createCanvas(width, height, null);\r\n    } else {\r\n      this.canvas.width = width;\r\n      this.canvas.height = height;\r\n      const bounds = this._getBounds();\r\n      if (this.layer_) {\r\n        this.layer_.setBounds(this.options.bounds || bounds);\r\n      }\r\n    }\r\n    this.render(this.canvas);\r\n    return this.canvas;\r\n  }\r\n\r\n  /**\r\n   * fixed viewMode\r\n   * @private\r\n   */\r\n  _getBounds () {\r\n    const type = this.map.getViewMode_();\r\n    let [southWest, northEast] = [];\r\n    const bounds = this.map.getBounds()\r\n    if (type.toLowerCase() === '2d') {\r\n      northEast = bounds.getNorthEast(); // xmax ymax\r\n      southWest = bounds.getSouthWest(); // xmin ymin\r\n    } else {\r\n      // TODO: 高德地图3D模式下目前返回的bounds顺序为左上-右上-右下-左下-左上\r\n      const arrays = bounds.bounds.map(item => {\r\n        return [item.getLng(), item.getLat()];\r\n      });\r\n      // const extent = getExtent(arrays);\r\n      southWest = new AMap.LngLat(...arrays[3]);\r\n      northEast = new AMap.LngLat(...arrays[1]);\r\n    }\r\n    return new AMap.Bounds(southWest, northEast);\r\n  }\r\n\r\n  /**\r\n   * bounds, width, height, extent\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  _getExtent () {\r\n    const [width, height] = [this.map.getSize().width, this.map.getSize().height];\r\n    const bounds = this._getBounds();\r\n    const _ne = bounds.getNorthEast();\r\n    const _sw = bounds.getSouthWest();\r\n    const min = _sw.lng;\r\n    // TODO: 当东北角坐标小于0时需要按照经度递增处理，而且目前高德最多只会有一个世界\r\n    const max = _ne.lng < 0 ? 360 + _ne.lng : _ne.lng;\r\n    const xmin = Math.min(min, max);\r\n    const xmax = Math.max(min, max);\r\n    return [\r\n      [\r\n        [0, 0], [width, height]\r\n      ],\r\n      width,\r\n      height,\r\n      [\r\n        [xmin, _sw.lat], [xmax, _ne.lat] // [xmin, ymin, xmax, ymax]: 西南 和 东北\r\n      ]\r\n    ]\r\n  }\r\n\r\n  /**\r\n   * remove layer\r\n   */\r\n  removeLayer () {\r\n    if (!this.map) return;\r\n    this.layer_.setMap(null);\r\n    this.map.off('resize', this.handleResize, this);\r\n    this.map.off('mapmove', this.canvasFunction, this);\r\n    this.map.off('zoomchange', this.canvasFunction, this);\r\n    delete this.map;\r\n    delete this.layer_;\r\n    delete this.canvas;\r\n  }\r\n\r\n  /**\r\n   * get canvas context\r\n   * @returns {*}\r\n   */\r\n  getContext () {\r\n    return this.canvas.getContext(this.context);\r\n  }\r\n\r\n  /**\r\n   * get mouse point data\r\n   * @param coordinates\r\n   * @returns {{direction: number, speed: *}}\r\n   */\r\n  getPointData (coordinates) {\r\n    const gridValue = this._windy.interpolatePoint(coordinates[0], coordinates[1]);\r\n    if (gridValue && !isNaN(gridValue[0]) && !isNaN(gridValue[1]) && gridValue[2]) {\r\n      return {\r\n        direction: getDirection(gridValue[0], gridValue[1], this.options.angleConvention || 'bearingCCW'),\r\n        speed: getSpeed(gridValue[0], gridValue[1], this.options.speedUnit)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * clear wind\r\n   */\r\n  clearWind () {\r\n    if (this._windy) this._windy.stop();\r\n  }\r\n\r\n  /**\r\n   * update windy config\r\n   * @param params\r\n   * @returns {AMapWind}\r\n   */\r\n  updateParams (params) {\r\n    this.options = Object.assign(this.options, params);\r\n    if (this._windy) {\r\n      const {\r\n        minVelocity, // 粒子强度最小的速度 (m/s)\r\n        maxVelocity, // 粒子强度最大的速度 (m/s)\r\n        velocityScale, // 风速的比例\r\n        particleAge, // 重绘之前生成的离子数量的最大帧数\r\n        lineWidth, // 绘制粒子的线宽\r\n        particleMultiplier, // 离子数量\r\n        colorScale\r\n      } = this.options;\r\n      if (this._windy) {\r\n        // this._windy.stop();\r\n        this._windy.updateParams({\r\n          minVelocity,\r\n          maxVelocity,\r\n          velocityScale,\r\n          particleAge,\r\n          lineWidth,\r\n          particleMultiplier,\r\n          colorScale\r\n        });\r\n        if (this.map && this.canvas && this.data) {\r\n          this.render(this.canvas);\r\n        }\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * get windy config\r\n   * @returns {null|*|Windy.params|{velocityScale, minVelocity, maxVelocity, colorScale, particleAge, lineWidth, particleMultiplier}}\r\n   */\r\n  getParams () {\r\n    return this._windy && this._windy.getParams();\r\n  }\r\n}\r\n\r\nexport default AMapWind\r\n","import Windy from '../windy/windy';\r\nimport { getDirection, getSpeed } from '../helper';\r\n\r\nconst global = typeof window === 'undefined' ? {} : window;\r\n\r\nif (!global.BMap) global.BMap = {};\r\n\r\nif (!global.BMap.Overlay) global.BMap.Overlay = class Overlay {};\r\n\r\nclass BaiduWind extends global.BMap.Overlay {\r\n  constructor (data, options = {}) {\r\n    super(options);\r\n    this.options = options;\r\n    this.paneName = this.options.paneName || 'mapPane';\r\n    this.context = this.options.context || '2d';\r\n    this.zIndex = this.options.zIndex || 0;\r\n    this.mixBlendMode = this.options.mixBlendMode || null;\r\n    this.enableMassClear = this.options.enableMassClear;\r\n    this._map = options.map;\r\n    this._lastDrawTime = null;\r\n\r\n    /**\r\n     * 矢量图层\r\n     * @type {null}\r\n     */\r\n    this.canvas = null;\r\n\r\n    /**\r\n     * windy 数据\r\n     */\r\n    this.data = data;\r\n\r\n    /**\r\n     * windy layer\r\n     * @type {null}\r\n     */\r\n    this._windy = null;\r\n    this.show();\r\n  }\r\n\r\n  /**\r\n   * get layer data\r\n   * @returns {*}\r\n   */\r\n  getData () {\r\n    return this.data;\r\n  }\r\n\r\n  /**\r\n   * set data\r\n   * @param data\r\n   */\r\n  setData (data) {\r\n    this.data = data;\r\n    if (this._map && this.data) {\r\n      this._draw();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * bounds, width, height, extent\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  _getExtent () {\r\n    const size = this._map.getSize();\r\n    const _ne = this._map.getBounds().getNorthEast();\r\n    const _sw = this._map.getBounds().getSouthWest();\r\n    return [\r\n      [\r\n        [0, 0], [size.width, size.height]\r\n      ],\r\n      size.width,\r\n      size.height,\r\n      [\r\n        // [_ne.lng, _ne.lat], [_sw.lng, _sw.lat]\r\n        [_sw.lng, _sw.lat], [_ne.lng, _ne.lat] // [xmin, ymin, xmax, ymax]: 西南 和 东北\r\n      ]\r\n    ]\r\n  }\r\n\r\n  /**\r\n   * append layer to map\r\n   * @param map\r\n   */\r\n  appendTo (map) {\r\n    if (map) {\r\n      map.addOverlay(this);\r\n    } else {\r\n      throw new Error('not map object');\r\n    }\r\n  }\r\n\r\n  initialize (map) {\r\n    this._map = map;\r\n    const canvas = this.canvas = document.createElement('canvas');\r\n    canvas.style.cssText = `position:absolute; left:0; top:0; z-index: ${this.zIndex} ;user-select:none;`;\r\n    canvas.style.mixBlendMode = this.mixBlendMode;\r\n    this.adjustSize();\r\n    map.getPanes()[this.paneName].appendChild(canvas);\r\n    map.addEventListener('resize', () => {\r\n      this.adjustSize();\r\n      this._draw();\r\n    });\r\n    return this.canvas\r\n  }\r\n\r\n  adjustSize () {\r\n    const size = this._map.getSize();\r\n    const canvas = this.canvas;\r\n    const devicePixelRatio = this.devicePixelRatio = global.devicePixelRatio || 1;\r\n    canvas.width = size.width * devicePixelRatio;\r\n    canvas.height = size.height * devicePixelRatio;\r\n    if (this.context === '2d') {\r\n      canvas.getContext(this.context).scale(devicePixelRatio, devicePixelRatio)\r\n    }\r\n    canvas.style.width = size.width + 'px';\r\n    canvas.style.height = size.height + 'px';\r\n  }\r\n\r\n  draw () {\r\n    const self = this;\r\n    clearTimeout(self.timeoutID);\r\n    self.timeoutID = setTimeout(function () {\r\n      self._draw()\r\n    }, 15);\r\n  }\r\n\r\n  _draw () {\r\n    const map = this._map;\r\n    const size = map.getSize();\r\n    const center = map.getCenter();\r\n    if (center) {\r\n      const pixel = map.pointToOverlayPixel(center);\r\n      this.canvas.style.left = pixel.x - size.width / 2 + 'px';\r\n      this.canvas.style.top = pixel.y - size.height / 2 + 'px';\r\n      this.dispatchEvent('draw');\r\n      this.options.update && this.options.update.call(this);\r\n      this.render(this.canvas);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * render windy layer\r\n   * @param canvas\r\n   * @returns {BaiduWind}\r\n   */\r\n  render (canvas) {\r\n    const extent = this._getExtent();\r\n    if (!this.getData() || !extent) return this;\r\n    if (canvas && !this._windy) {\r\n      const {\r\n        minVelocity,\r\n        maxVelocity,\r\n        velocityScale,\r\n        particleAge,\r\n        lineWidth,\r\n        particleMultiplier,\r\n        colorScale\r\n      } = this.options;\r\n      this._windy = new Windy({\r\n        canvas: canvas,\r\n        data: this.getData(),\r\n        'onDraw': () => {\r\n        },\r\n        minVelocity,\r\n        maxVelocity,\r\n        velocityScale,\r\n        particleAge,\r\n        lineWidth,\r\n        particleMultiplier,\r\n        colorScale\r\n      });\r\n      this._windy.start(extent[0], extent[1], extent[2], extent[3]);\r\n    } else if (canvas && this._windy) {\r\n      this._windy.start(extent[0], extent[1], extent[2], extent[3]);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  getContainer () {\r\n    return this.canvas;\r\n  }\r\n\r\n  setZIndex (zIndex) {\r\n    this.zIndex = zIndex;\r\n    this.canvas.style.zIndex = this.zIndex;\r\n  }\r\n\r\n  getZIndex () {\r\n    return this.zIndex;\r\n  }\r\n\r\n  /**\r\n   * get mouse point data\r\n   * @param coordinates\r\n   * @returns {{direction: number, speed: *}}\r\n   */\r\n  getPointData (coordinates) {\r\n    const gridValue = this._windy.interpolatePoint(coordinates[0], coordinates[1]);\r\n    if (gridValue && !isNaN(gridValue[0]) && !isNaN(gridValue[1]) && gridValue[2]) {\r\n      return {\r\n        direction: getDirection(gridValue[0], gridValue[1], this.options.angleConvention || 'bearingCCW'),\r\n        speed: getSpeed(gridValue[0], gridValue[1], this.options.speedUnit)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * clear wind\r\n   */\r\n  clearWind () {\r\n    if (this._windy) this._windy.stop();\r\n  }\r\n\r\n  /**\r\n   * update windy config\r\n   * @param params\r\n   * @returns {BaiduWind}\r\n   */\r\n  updateParams (params) {\r\n    this.options = Object.assign(this.options, params);\r\n    if (this._windy) {\r\n      const {\r\n        minVelocity, // 粒子强度最小的速度 (m/s)\r\n        maxVelocity, // 粒子强度最大的速度 (m/s)\r\n        velocityScale, // 风速的比例\r\n        particleAge, // 重绘之前生成的离子数量的最大帧数\r\n        lineWidth, // 绘制粒子的线宽\r\n        particleMultiplier, // 离子数量\r\n        colorScale\r\n      } = this.options;\r\n      if (this._windy) {\r\n        // this._windy.stop();\r\n        this._windy.updateParams({\r\n          minVelocity,\r\n          maxVelocity,\r\n          velocityScale,\r\n          particleAge,\r\n          lineWidth,\r\n          particleMultiplier,\r\n          colorScale\r\n        });\r\n        if (this._map && this.canvas && this.data) {\r\n          this.render(this.canvas);\r\n        }\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * get windy config\r\n   * @returns {null|*|Windy.params|{velocityScale, minVelocity, maxVelocity, colorScale, particleAge, lineWidth, particleMultiplier}}\r\n   */\r\n  getParams () {\r\n    return this._windy && this._windy.getParams();\r\n  }\r\n}\r\n\r\nexport default BaiduWind;\r\n","import OlWind from './openlayers';\r\nimport AMapWind from './amap';\r\nimport BMapWind from './bmap';\r\n\r\nexport default {\r\n  AMapWind,\r\n  BMapWind,\r\n  OlWind\r\n}\r\n"],"names":["const","let","super","extent","global","this","BMapWind"],"mappings":"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"}